/*
 * Copyright (c) 2013 Matthieu
 * All rights reserved.
 */
import RISCV_Definitions;

port in data_t pc_normal, sync pc_jump, out next_pc, u2 pc;

void main() {
	if (pc_jump.available) {
		// if PC from jump available, use it
		write_pc(pc_jump.read);
	} else {
		// otherwise just use normal PC
		write_pc(pc_normal.read);
	}
}

void write_pc(data_t new_pc) {
	print("writing new pc: ", new_pc / 4);
	pc.write(new_pc / 4);
	next_pc.write(new_pc + 4);
}
